name: Build, Test and Deploy

on:
push:
branches: [ "main" ]
pull_request:
branches: [ "main" ]

jobs:
build:
runs-on: ubuntu-latest

yaml
Copy code
steps:
- uses: actions/checkout@v2

- name: Set up JDK
  uses: actions/setup-java@v2
  with:
    java-version: '11'
    distribution: 'adopt'

- name: Build project
  run: |
    javac -cp src src/Main.java
    javac -cp src src/ClassTeste.java

- name: Run tests
  run: |
    java -cp src ClassTeste

- name: Docker Build & Push
  uses: docker/build-push-action@v2
  with:
    username: ${{ secrets.DOCKER_USER }}
    password: ${{ secrets.DOCKER_PASSWORD }}
    repository: my-docker-repo
    tag_with_ref: true
    context: .
    push: true
